<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Spartan:wght@400;700&display=swap">

</head>
<body>
  <header>
    <div class="header">
      <a href="/"><img src="/images/resources/logo.png" alt="Logo"  class="header-logo"></a>
      <div class="header-center">
        <form action="/products/search" method="GET" class="search-form">
          <input class="buscador" type="text" name="busqueda" placeholder="¿Qué estás buscando?">
          <button type="submit" class="boton-search">Buscar👀</button>
        </form>
      </div>
      <div class="header-right boton-header">
        <a class="" href="/">Home🏡</a>
        <a class="" href="/products">Productos🧺</a>
        <a  href="/products/productsCat">Gatos🐱</a>
        <a class="" href="/products/productsDog">Perros🐶</a>
      </div>

      <div class="header-right boton-header">
        <a class="" href="/products/productCart">🛒 Mi Carrito:</a>
        <a href="/products/productCart" class="cart-number">0</a>
      </div>
      <div class="header-ingresar boton-header" id="loginBtn">
        <a href="/users">Ingresar <i class="fa-solid fa-user"></i></a>
      </div>
      </div>
    </div>
  </header>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        var loginBtn = document.getElementById('loginBtn');

        // Verificar si la cookie "user_id" está presente
        var isAuthenticated = document.cookie.includes('user_id');  

        if (isAuthenticated) {
            loginBtn.innerHTML = '<a href="/logout">Salir <i class="fa-solid fa-user"></i></a>';
        } else {
            loginBtn.innerHTML = '<a href="/users">Ingresar <i class="fa-solid fa-user"></i></a>';
        }

        // Manejar clic en el botón de inicio de sesión/desconexión
        loginBtn.addEventListener('click', function (event) {
            event.preventDefault();

            if (isAuthenticated) {
                // Realizar la lógica de desconexión, por ejemplo, redirigir a /logout
                window.location.href = '/users/logout';
            } else {
                // Realizar la lógica de inicio de sesión, por ejemplo, redirigir a /users
                window.location.href = '/users/profile';
            }
        });
    });
</script>
</body>
</html>