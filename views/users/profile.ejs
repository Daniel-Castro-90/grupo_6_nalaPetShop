<!DOCTYPE html>
<html lang="es">

<head>
    <%- include('../partials/head') %>

</head>

<body>
    <%- include('../partials/header') %>

        <main class="mt-5 pt-4">
            <div class="container wow fadeIn animated">
                <h2 class="mt-5 mb-3 h2 text-center">
                    Perfil de <%= locals.userLogged.email%>
                </h2>
                <div class="card mb-5">
                    <div class="card-header">
                        <h3 style="text-align: center;">Mis Datos</h3>
                    </div>
                    <div class="card-body">
                        <h2><span class="font-weight-bold mr-2">Bienvenido </span></h2>
                            <img src="<%= locals.userLogged.image %>">

                        <p><span class="font-weight-bold mr-2">Mi contacto: </span>
                            <%= locals.userLogged.tel %>
                        </p>
                        <a href="profile/edit" class="btn btn-info ml-0">Editar mi perfil</a>
                        <a href="/users/logout" class="btn btn-danger ml-0">Salir</a>
                    </div>
                </div>
                <div class="card mb-5">
                    <div class="card-header">
                        <h3 style="text-align: center;">Mis Pedidos</h3>
                    </div>
                    <div class="card-body">
                        <table class="table table-responsive-md mb-0">
                            <thead>
                                <tr>
                                    <th style="width: 50px;">
                                        <strong>#</strong>
                                    </th>
                                    <th class="th-lg" style="width: 150px;">
                                        <strong>Fecha de Pedido</strong>
                                    </th>
                                    <th class="th-lg" style="width: 150px;">
                                        <strong>Método de Envío</strong>
                                    </th>
                                    <th class="th-lg" style="width: 150px;">
                                        <strong>Medio de Pago</strong>
                                    </th>
                                    <th>
                                        <strong>Total</strong>
                                    </th>
                                    <th style="width: 100px;"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <% orders.forEach((order, index) => { %>
                                    <tr>
                                        <th scope="row">
                                            <%= index + 1 %>
                                        </th>
                                        <td>
                                            <%= new Intl.DateTimeFormat('es-ES', {year:'numeric', month:'numeric', day:'2-digit', hour:'numeric', minute:'numeric'}).format(order.createdAt) %>
                                        </td>
                                        <td>
                                            <%= order.shippingMethod %>
                                        </td>
                                        <td>
                                            <%= order.paymentMethod %>
                                        </td>
                                        <td>$ <%= order.total %>
                                        </td>
                                        <td><a class="btn tn-warning btn-sm" href="<%= `/products/order/${order.id}`%>"><i class="fas fa-eye"></i></a>
                                        </td>
                                    </tr>
                                <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        <%- include('../partials/footer') %>
</body>

</html>